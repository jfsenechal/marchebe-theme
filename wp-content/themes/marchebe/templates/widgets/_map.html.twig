{% if latitude and longitude %}
    <div id="openmap" class="mt-3" style="width: 100%; height: 400px;"></div>

    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof L !== 'undefined') {
                const latitude = parseFloat('{{ latitude }}');
                const longitude = parseFloat('{{ longitude }}');
                const center = [latitude, longitude];
                const nom = "{{ title|raw }}";

                const map = L.map('openmap').setView(center, 15);

                L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',
                    minZoom: 1,
                    maxZoom: 20
                }).addTo(map);

                L.marker(center, {
                    title: nom,
                    draggable: false
                }).addTo(map)
                  .bindPopup(nom)
                  .openPopup();
            }
        });
    </script>
{% endif %}
